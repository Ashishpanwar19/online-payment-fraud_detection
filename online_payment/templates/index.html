<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Fraud Detection</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container min-vh-100 d-flex flex-column justify-content-center align-items-center" role="main">
        <div class="card p-4 shadow-lg" style="width: 100%; max-width: 500px;" role="form">
            <h2 class="text-center mb-4">üõ°Ô∏è Payment Fraud Detector</h2>

            <form action="/predict" method="POST" id="fraudForm" aria-labelledby="fraudForm">
                <div class="mb-3">
                    <label for="type" class="form-label">Transaction Type:</label>
                    <select name="type" id="type" class="form-select" required>
                        <option value="CASH_OUT">CASH_OUT</option>
                        <option value="PAYMENT">PAYMENT</option>
                        <option value="CASH_IN">CASH_IN</option>
                        <option value="TRANSFER">TRANSFER</option>
                        <option value="DEBIT">DEBIT</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label for="amount" class="form-label">Transaction Amount:</label>
                    <input type="number" step="any" name="amount" id="amount" class="form-control" required>
                </div>

                <div class="mb-3">
                    <label for="oldbalanceOrg" class="form-label">Old Balance:</label>
                    <input type="number" step="any" name="oldbalanceOrg" id="oldbalanceOrg" class="form-control" required>
                </div>

                <div class="mb-3">
                    <label for="newbalanceOrig" class="form-label">New Balance:</label>
                    <input type="number" step="any" name="newbalanceOrig" id="newbalanceOrig" class="form-control" required>
                </div>

                <button type="submit" class="btn btn-primary w-100">Predict Fraud</button>
            </form>

            <div id="loadingSpinner" class="text-center mt-3" style="display: none;" role="status" aria-live="polite">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mt-2">Predicting, please wait...</p>
            </div>

            {% if prediction %}
            <div id="resultSection" class="alert alert-{% if is_error or is_fraud %}danger{% else %}success{% endif %}">
                {{ prediction }}
                {% if not is_error %}
                <div class="mt-2">
                    <small>Transaction Details:</small>
                    <ul>
                        <li>Type: {{ request.form['type'] }}</li>
                        <li>Amount: ${{ "%.2f"|format(request.form['amount']|float) }}</li>
                    </ul>
                </div>
                {% endif %}
            </div>
            {% endif %}
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const fraudForm = document.getElementById('fraudForm');
        const loadingSpinner = document.getElementById('loadingSpinner');

        fraudForm.addEventListener('submit', function () {
            loadingSpinner.style.display = 'block';
        });

        window.onload = function () {
            const result = document.getElementById('resultSection');
            if (result) {
                result.style.opacity = 1;
            }
        };
    </script>
</body>
</html>
